# binarySearch æ€»ç»“

æ³¨æ„ä½“ä¼šè¾¹ç•Œæƒ…å†µ

[å‚è€ƒ](https://segmentfault.com/a/1190000016825704#item-2-1)

å¯¹äºäºŒåˆ†çš„çµæ´»ä½¿ç”¨æ˜¯å»ºç«‹åœ¨å¯¹å†…éƒ¨æµç¨‹ç†Ÿæ‚‰çš„æƒ…å†µä¸‹çš„ï¼Œæ‰€ä»¥åœ¨

- æ ‡å‡†äºŒåˆ†
- å·¦è¾¹ç•Œ
- ä¸xæœ€æ¥è¿‘çš„ä¸¤ä¸ªå€¼

ä¸­ï¼Œç”¨dev debugå»ä½“ä¼šä¸­é—´çš„æµç¨‹



## æ ‡å‡†äºŒåˆ†æŸ¥æ‰¾

```js
function binarySearch(arr, tar) {
  let left = 0, right = arr.length - 1
  while (left <= right) {
    let mid = Math.floor((left + right) / 2)
    if (arr[mid] < tar) {
      left = mid + 1
    } else if (arr[mid] > tar) {
      right = mid - 1
    } else {
      return mid
    }
  }
  return -1
}
```

å€¼å¾—æ³¨æ„çš„ç»†èŠ‚

å³å› ä¸ºmidå¯¹äºé•¿åº¦ä¸ºå¶æ•°çš„åŒºé—´æ€»æ˜¯åå·¦çš„ï¼Œæ‰€ä»¥å½“åŒºé—´é•¿åº¦å°äºç­‰äº2æ—¶ï¼Œmid æ€»æ˜¯å’Œ leftåœ¨åŒä¸€ä¾§ã€‚



## è¾¹ç•ŒæŸ¥æ‰¾

```js
// å·¦è¾¹ç•Œ
// å¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºtarçš„å…ƒç´ 
function searchFirst(arr, tar) {
  let left = 0, right = arr.length - 1
  while (left < right) {
    let mid = Math.floor((left + right) / 2)
    if (arr[mid] < tar) {
      left = mid + 1
    } else {
      right = mid
    }
  }
  return left
}

// å³è¾¹å±Š
// å¯»æ‰¾æœ€åä¸€ä¸ªå¤§çº¦ç­‰äºtarçš„å…ƒç´ 
function searchLast(arr, tar) {
  let left = 0, right = arr.length - 1
  while (left < right) {
    let mid = Math.floor((left + right) / 2)
    if (arr[mid] > tar) {
      right = mid - 1
    } else {
      left = mid
    }
  }
  return right
}
```

å› ä¸ºæ˜¯æŸ¥æ‰¾å·¦è¾¹ç•Œï¼Œæ‰€ä»¥è¯´å³ä½¿ç­‰äºtarä¹Ÿè¦æ¥ç€æ‰¾ï¼Œæœç´¢èŒƒå›´ä»å³è¾¹å¼€å§‹ï¼Œä¸æ–­å‘å·¦æ”¶ç¼©,åæ˜ åœ¨ä»£ç ä¸Šå°±æ˜¯å¯¹leftçš„æ“ä½œæ²¡æœ‰ç­‰å·ï¼Œç›¸å¯¹æ“ä½œå°‘ä¸€äº›ï¼Œä¸»è¦è®©rightä¸æ–­å‡å°

åä¹‹å¾ªç¯ç»“æŸæ¡ä»¶éƒ½æ˜¯left = right 



æœ‰æ—¶å€™è¾¹ç•Œçš„ç¼©å‡éœ€è¦æ…¢ä¸€ç‚¹ï¼Œæ¯”å¦‚ [154. Find Minimum in Rotated Sorted Array II](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/)

## ä¸xæœ€ç›¸è¿‘çš„ä¸¤ä¸ªå€¼

```js
// å¯»æ‰¾æœ€æ¥è¿‘çš„ä¸¤ä¸ªï¼Œif tie choose smaller
function search(arr, tar) {
  let left = 0, right = arr.length - 1
  while (left + 1 < right) {
    let mid = Math.floor((left + right) / 2)
    if (arr[mid] < tar) {
      left = mid
    } else {
      right = mid
    }
  }
  return [left, right]
}
```

å¾ªç¯ç»“æŸæ¡ä»¶æ˜¯leftå’ŒrightæŒ¨ç€äº†



## æ€»ç»“

äºŒåˆ†ç®—æ³•è™½ç„¶åœ¨æ€æƒ³ä¸Šå¾ˆå®¹æ˜“ç†è§£ï¼Œä½†å…·ä½“çš„è¾¹ç•Œå’Œç»†èŠ‚å¤„ç†éœ€è¦å¾ˆå¤šç†è§£å’Œè€å¿ƒ



æ€»çš„æ¥çœ‹ï¼Œå¯ä»¥ä»ä»¥ä¸‹æ–¹é¢å…¥æ‰‹



### å¾ªç¯æ§åˆ¶

- `if(left <= right)`
  -  å¯»æ‰¾å”¯ä¸€ç‚¹ å·¦å³è¾¹ç•Œæ›´æ–°çš„æ—¶å€™éƒ½æœ‰mid +1 or -1
- `if(left < right) `
  - å¯»æ‰¾è¾¹ç•Œç‚¹ å·¦å³è¾¹ç•Œæœ‰ä¸€ä¸ªæ˜¯ = midè¿›è¡Œæ›´æ–°çš„  è·³å‡ºå¾ªç¯çš„æ—¶å€™left = right
- `if(left + 1 < right)`
  -  æ§åˆ¶è·³å‡ºå¾ªç¯çš„æ—¶å€™leftå’Œrightä¸æŒ‡å‘åŒä¸€ä¸ªå…ƒç´  è·³å‡ºçš„æ—¶å€™left + 1 = right



## åŒºé—´å’Œmid ç†è§£

ä¸ªäººæ„Ÿè§‰å·¦é—­å³é—­æ¯”è¾ƒå®¹æ˜“ç†è§£ 

[left, right]



mid åœ¨åŒºé—´é•¿åº¦ä¸ºå¥‡æ•°çš„æ—¶å€™ æŒ‡å‘åŒºé—´æ­£ä¸­é—´å…ƒç´ 

mid åœ¨åŒºé—´é•¿åº¦ä¸ºå¶æ•°çš„æ—¶å€™ æŒ‡å‘åŒºé—´ä¸­é—´ä¸¤ä¸ªå…ƒç´ åä¸Šå·¦è¾¹ä¸€ä¸ª

**è¿™ä¸¤ç‚¹çš„ç†è§£éå¸¸é‡è¦**ï¼Œåœ¨æ¶‰åŠåˆ°å³è¾¹ç•Œçš„æ—¶å€™ mid+1å‡ºè‡ªäºæ­¤ï¼Œè¾¹ç•Œè·³å‡ºçš„ç†è§£ä¹Ÿå‡ºè‡ªäºæ­¤



é˜²æ­¢æº¢å‡º `left + (right - left)/2`



### æ›´æ–°æ§åˆ¶

æ­£å¸¸æœç´¢æŸä¸ªå…ƒç´ å°±ä¸è¯´äº†

å½“æœç´¢è¾¹ç•Œçš„æ—¶å€™



å¦‚æœä¸ºå·¦è¾¹ç•Œï¼Œé‚£ä¹ˆå°½å¯èƒ½çš„æ”¶ç¼©right

è¡¨ç°å°±æ˜¯

when (arr[mid] >= tar) right = mid

æœ‰ä¸¤ä¸ªåˆ¤å®šéƒ½è½åœ¨äº†rightä¸Š å¹¶ä¸”rightçš„æ›´æ–°æ˜¯ = midçš„(ç»“åˆmidåå‘è¿›è¡Œç†è§£)



åœ¨è®¾å®šè¾¹ç•Œçš„æ—¶å€™ï¼Œä»ä»è·³å‡ºçš„æƒ…å†µä¸­ï¼Œæ€è€ƒæœ€åè·³å‡ºçš„æƒ…å†µï¼Œç»“åˆåŒºé—´midè¿›è¡Œç†è§£



çœŸçš„å…¨éƒ¨ç†è§£äº†æ„Ÿè§‰å¥½ç•…å¿«ğŸ˜„