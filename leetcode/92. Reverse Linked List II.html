<!--
 * @Author: SedationH
 * @Date: 2020-07-08 19:51:20
 * @LastEditTime: 2020-07-09 10:31:23
 * @FilePath: /learn-algorithm/leetcode/92. Reverse Linked List II.html
-->

<body>

  <script src="./kit/ListNode.js"></script>
  <script>
    /**
     * 分析：
     * 1. 通过创建一个头节点，减少特殊判断
     * 2. 记录四个关键位置
     * 3. 结合关键位置进行reverse
     */
    var reverseBetween = function (head, m, n) {
      let cnt = 0
      let preStart = null, start = null, end = null, afterEnd = null
      // 意识到可以增加个头节点，这样就不用特别判断了
      let headNode = new ListNode(null)
      headNode.next = head
      let p1 = headNode, p2 = head
      while (true) {
        // 记录工作
        if (cnt + 1 === m) {
          preStart = p1
          start = p2
        }
        if (cnt === n) {
          end = p1
          afterEnd = p2
          preStart.next = end
          start.next = afterEnd
          break
        }
        // 改变工作
        // 要完成的任务：将p2所指向的元素指向p1
        let tem = p2.next
        if (cnt >= m && cnt < n) {
          p2.next = p1
        }
        p1 = p2
        p2 = tem
        cnt++
      }

      return headNode.next
    }

    var solutionOne = function (head, m, n) {
      let cnt = 0
      let preStart = null, start = null, end = null, afterEnd = null
      let p1 = null, p2 = head
      while (true) {
        // 记录工作
        if (cnt + 1 === m) {
          preStart = p1
          start = p2
        }
        if (cnt === n) {
          end = p1
          afterEnd = p2
          // 如果preStart为null，此时m === 1 需要特殊处理
          if (m === 1) {
            head = end
          } else {
            preStart.next = end
          }
          start.next = afterEnd
          break
        }
        // 改变工作
        // 要完成的任务：将p2所指向的元素指向p1
        let tem = p2.next
        if (cnt >= m && cnt < n) {
          p2.next = p1
        }
        p1 = p2
        p2 = tem
        cnt++
      }

      return head
    };

    ShowListNode(
      reverseBetween(
        Array2ListNode([1, 2, 3, 4, 5]), 1, 3
      )
    )

  </script>
</body>