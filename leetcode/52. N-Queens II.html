<body>

  <script>
    var totalNQueens = function (n) {
      /**
       * track中的值表示所在列，值对应的index表示所在行
       * 默认完成了对于行不重复的要求
       */
      const track = [], ans = []

      backtrack()

      return ans.length

      function backtrack() {
        if (track.length === n) {
          ans.push(track.slice())
          return
        }

        for (let i = 0; i < n; i++) {
          if (!isValid(i)) continue
          track.push(i)
          backtrack()
          track.pop()
        }
      }

      // 判断当前i值加入皇后是否可行
      function isValid(i) {
        // 没有在同一列的
        if (track.includes(i)) return false
        // 注意理清楚横纵坐标
        /**
         *  --------- x
         *  |
         *  |
         *  |
         *  |
         *  y
         */
        const x = i, y = track.length
        for (let i = 0; i < track.length; i++) {
          const xi = track[i], yi = i
          // add ↗️ sub ↘️
          if (x + y === xi + yi || x - xi === y - yi) return false
        }

        return true
      }
    };
  </script>
</body>