<body>

  <script>
    /**
 * @param {number[][]} matrix
 * @param {number} k
 * @return {number}
 */
    var kthSmallest = function (matrix, k) {
      let n = matrix.length
      if (n < 1) return null
      let left = matrix[0][0], right = matrix[n - 1][n - 1]
      while (left < right) {
        let mid = Math.floor((left + right) / 2)
        let cnt = findCnt(mid)
        if (cnt < k) {
          left = mid + 1
        } else {
          right = mid
        }
      }
      return left


      /**
       * 在matrix中寻找最后一个大于等于mid的元素的是第几大
       */
      function findCnt(mid) {
        let cnt = 0
        for (let i = 0; i < n; i++) {
          if (mid >= matrix[i][n - 1]) {
            cnt += n
          } else {
            cnt += n
            for (let j = n - 1; j >= 0; j--) {
              if (mid < matrix[i][j]) {
                cnt--
              }
            }
            return cnt
          }
        }
      }
    };


    console.log(
      kthSmallest(
        [[1, 2], [1, 3]],
        2
      )
    )
  </script>
</body>