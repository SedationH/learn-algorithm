<!--
 * @Author: SedationH
 * @Date: 2020-07-19 23:24:59
 * @LastEditTime: 2020-07-20 14:50:25
 * @FilePath: /learn-algorithm/leetcode/547. Friend Circles.html
-->

<body>

  <script>
    /**
    * @param {number[][]} M
    * @return {number}
    */
    var findCircleNum = function (M) {
      const n = M.length
      const parent = Array(n).fill(0).map((_, i) => i)
      for (let i = 0; i < n; i++) {
        for (let j = 0; j < n; j++) {
          if (M[i][j] === 1) {
            union(i, j)
          }
        }
      }
      const deputy = new Set()
      for (let i = 0; i < n; i++) {
        deputy.add(find(i))
      }
      return deputy.size

      function find(x) {
        while (x !== parent[x]) {
          x = parent[x]
        }
        return x
      }

      /**
       * 把b加入a的集合
       */
      function union(a, b) {
        const pa = find(a), pb = find(b)
        if (pa !== pb) {
          parent[pb] = pa
        }
      }
    };
  </script>
</body>