<body>
  è€ƒå¯Ÿå †æˆ–è€…å¿«é€Ÿæ’åº



  <script>
    /**
     * @param {number[]} nums
     * @param {number} k
     * @return {number}
     */
    var findKthLargest = function (nums, k) {
      // åˆ©ç”¨é€‰æ‹©æ’åº

      // å®šä¹‰æœ‰åºåŒºé—´ [0,i)
      // å› ä¸ºiä»0å¼€å§‹ï¼Œæ‰€ä»¥å¼€å§‹çš„æœ‰åºåŒºé—´é•¿åº¦ä¸º0
      // æ¯æ¬¡é€‰æ‹©æœ€å¤§çš„å…ƒç´ äº¤æ¢åˆ°iè¿™ä¸ªä½ç½®
      for (let i = 0; i < nums.length; i++) {
        let maxValue = nums[i]
        let maxValueIndex = i
        for (let j = i + 1; j < nums.length; j++) {
          const currValue = nums[j]
          if (currValue > maxValue) {
            maxValue = currValue
            maxValueIndex = j
          }
        }
        swap(nums, i, maxValueIndex)
        if (i + 1 === k) {
          return maxValue
        }
      }

      return null


      function swap(nums, i, j) {
        const temp = nums[i]
        nums[i] = nums[j]
        nums[j] = temp
      }
    };


    /**
     * @param {number[]} nums
     * @param {number} k
     * @return {number}
     */
    var findKthLargest = function (nums, k) {
      let left = 0
      let right = nums.length - 1
      // if len = 6 k = 1 , åˆ™ k = 5 ğŸ™†
      k = nums.length - k
      while (true) {
        const pivotIndex = partition(nums, left, right)
        if (pivotIndex === k) {
          return nums[pivotIndex]
          // æ‰¾çš„ä½ç½®æ¯”éœ€è¦çš„å¤§
        } else if (pivotIndex > k) {
          right = pivotIndex - 1
          // æ‰¾åˆ°çš„ä½ç½®æ¯”éœ€è¦çš„å°
        } else {
          left = pivotIndex + 1
        }
      }


      function partition(arr, left, right) {
        const pivot = arr[left]
        let lt = left
        for (let i = left + 1; i <= right; i++) {
          if (arr[i] < pivot) {
            lt++
            swap(arr, i, lt)
          }
        }
        swap(arr, lt, left)
        return lt
      }

      function swap(arr, i, j) {
        const temp = arr[i]
        arr[i] = arr[j]
        arr[j] = temp
      }
    };
    console.log(findKthLargest([3, 1, 2, 4], 2))
  </script>

  <script>
    throw 1
    var findKthLargest = function (nums, k) {
      return quickSort(nums)[nums.length - k]

      function kSort(arr) {
        const len = arr.length
        if ((len === 1) | (len === 0)) {
          return arr
        }
        const pivot = arr[0]
        const subArr = arr.slice(1)
        const left = subArr.filter(value => value < pivot)
        const right = subArr.filter(value => value >= pivot)

        return [...quickSort(left), pivot, ...quickSort(right)]
      }
    }

    var findKthLargest = function (nums, k) {
      // é€‰æ‹©æ’åº
      // å®šä¹‰æœ‰åºåŒºé—´ (i, len-1]
      const len = nums.length
      let cnt = 0
      for (let i = len - 1; i >= 0; i--) {
        let maxIndex = i
        for (let j = i - 1; j >= 0; j--) {
          if (nums[maxIndex] < nums[j]) {
            maxIndex = j
          }
        }
        swap(nums, i, maxIndex)
        cnt++
        if (k === cnt) return nums[i]
      }

      function swap(arr, i, j) {
        const temp = arr[i]
        arr[i] = arr[j]
        arr[j] = temp
      }
    }

    function qS(arr) {
      const len = arr.length
      if (len === 0 || len === 1) {
        return arr
      }
      const pivot = arr[0]
      const subArray = arr.slice(1)
      const leftSubArray = subArray.filter(v => v < pivot)
      const rightSubArray = subArray.filter(v => v >= pivot)

      return [...qS(leftSubArray), pivot, ...qS(rightSubArray)]
    }

    function qS2(arr) {
      help(arr, 0, arr.length - 1)
      return arr

      // åŒºé—´å®šä¹‰ [l, r] è¿›è¡ŒåŒºé—´æ’åº
      function help(arr, l, r) {
        const len = r - l + 1
        if (len === 0 || len === 1) {
          return
        }
        if (l <= r) {
          const pivotIndex = partition(arr, l, r)
          help(arr, l, pivotIndex - 1)
          help(arr, pivotIndex + 1, r)
        }
      }

      // åˆ†åŒºå¹¶è¿”å›pivotIndex
      // åŒºé—´å®šä¹‰ å¯¹ [l,r] è¿›è¡ŒåŒºé—´ partition
      function partition(arr, l, r) {
        let pivotIndex = l + 1
        for (let i = pivotIndex; i <= r; i++) {
          if (arr[i] < arr[l]) {
            swap(arr, i, pivotIndex)
            pivotIndex++
          }
        }
        swap(arr, l, --pivotIndex)
        return pivotIndex
      }

      function swap(arr, i, j) {
        const temp = arr[i]
        arr[i] = arr[j]
        arr[j] = temp
      }
    }

    function qS2(arr, k) {
      const targetIndex = arr.length - k
      help(arr, 0, arr.length - 1, targetIndex)
      return arr

      // åŒºé—´å®šä¹‰ [l, r] è¿›è¡ŒåŒºé—´æ’åº
      function help(arr, l, r, targetIndex) {
        const len = r - l + 1
        if (len === 0 || len === 1) {
          return
        }
        if (l <= r) {
          const pivotIndex = partition(arr, l, r)
          if (pivotIndex === targetIndex) return arr[targetIndex]
          help(arr, l, pivotIndex - 1, targetIndex)
          help(arr, pivotIndex + 1, r, targetIndex)
        }
      }

      // åˆ†åŒºå¹¶è¿”å›pivotIndex
      // åŒºé—´å®šä¹‰ å¯¹ [l,r] è¿›è¡ŒåŒºé—´ partition
      function partition(arr, l, r) {
        let pivotIndex = l + 1
        for (let i = pivotIndex; i <= r; i++) {
          if (arr[i] < arr[l]) {
            swap(arr, i, pivotIndex)
            pivotIndex++
          }
        }
        swap(arr, l, --pivotIndex)
        return pivotIndex
      }

      function swap(arr, i, j) {
        const temp = arr[i]
        arr[i] = arr[j]
        arr[j] = temp
      }
    }
    console.log(qS2([3, 2, 412, 1]))
  </script>

  <script>
    throw 1
    function quickSort(arr) {
      const len = arr.length
      if ((len === 1) | (len === 0)) {
        return arr
      }
      const pivot = arr[0]
      const subArr = arr.slice(1)
      const left = subArr.filter(value => value < pivot)
      const right = subArr.filter(value => value >= pivot)

      return [...quickSort(left), pivot, ...quickSort(right)]
    }
  </script>

  <script>
    throw 1
    // ä¸¾ä¾‹å­
    ;[5, 2, 7, 9, 6, 1, 4, 5, 0]

    // call1
    pivot = 5
    left = [2, 1, 4, 0]
    right = [7, 9, 6, 5]
    return [...qsort([2, 1, 4, 0]), 5, ...qsort([7, 9, 6, 5])]

    // call2
    pivot = 2
    left = [1, 0]
    right = [4]
    return [...qsort([1, 0]), 2, ...qsort([4])]

    // call3
    pivot = 1
    left = [0]
    right = []
    return [...qsort([0]), 1, ...qsort([])]

    // call4
    return [0]

    // call5
    return []

    // call6
    return [4]

    // call7
    pivot = 7
    // ç•¥...
  </script>
</body>