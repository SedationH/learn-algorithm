<script>
  /**
   * @param {string} s
   * @return {number}
   */
  // 更高效的收缩方式
  var lengthOfLongestSubstring = function (s) {
    const len = s.length
    let ans = 0
    // r用于探寻 l用来重复性控制
    let l = 0,
      r = 0
    const memo = {}
    while (r < len) {
      const char = s[r]
      if (memo[char] !== undefined) {
        // 如果用到了失效的状态，会区间扩大
        l = Math.max(memo[char] + 1, l)
      }
      // 要保持最新的状态～
      memo[char] = r
      ans = Math.max(r - l + 1, ans)
      r++
    }
    return ans
  }

  /**
   * @param {string} s
   * @return {number}
   */
  var lengthOfLongestSubstring = function (s) {
    const len = s.length
    let ans = 0
    // r用于探寻 l用来重复性控制
    let l = 0,
      r = 0
    const memo = {}
    while (r < len) {
      const char = s[r]
      // 区间收缩
      while (memo[char]) {
        const deleteChar = s[l]
        memo[deleteChar] = false
        l++
      }
      // 要保持最新的状态～
      memo[char] = true
      ans = Math.max(r - l + 1, ans)
      r++
    }
    return ans
  }

  // brute solution
  // substring
  // 超时
  var lengthOfLongestSubstring = function (s) {
    const length = s.length
    let len = length
    while (len) {
      for (let i = 0; i + len <= length; i++) {
        const subString = s.substring(i, i + len)
        const memo = new Set(subString)
        if (memo.size === len) {
          return len
        }
      }
      len--
    }
    return len
  }

  console.log(lengthOfLongestSubstring('abcabcbb'))
</script>
