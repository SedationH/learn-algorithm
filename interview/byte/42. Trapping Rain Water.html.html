<script>
/**
 * @param {number[]} height
 * @return {number}
 */
var trap = function (height) {
  const len = height.length
  const l2r = Array.from({ length: len }, () => 0)
  const r2l = Array.from({ length: len }, () => 0)
  const h = []
  for (let i = 1; i < len; i++) {
    l2r[i] = Math.max(l2r[i - 1], height[i - 1])
  }
  for (let j = len - 2; j >= 0; j--) {
    r2l[j] = Math.max(r2l[j + 1], height[j + 1])
  }

  for (let i = 0; i < len; i++) {
    h[i] = Math.min(l2r[i], r2l[i])
  }
  let ans = 0
  for (let i = 0; i < len; i++) {
    const can = h[i] - height[i]
    ans += can < 0 ? 0 : can
  }
  return ans
}

  console.log(trap([0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]))
</script>
